# React Hooks

Hooks powered by [TanStack Query](https://tanstack.com/query) for async state management.

## Installation

:::code-group

```bash [pnpm]
pnpm add @whisk/steakhouse @tanstack/react-query
```

```bash [npm]
npm install @whisk/steakhouse @tanstack/react-query
```

```bash [yarn]
yarn add @whisk/steakhouse @tanstack/react-query
```

:::

## Setup

Wrap your app in both `QueryClientProvider` (TanStack Query) and `SteakhouseProvider`.

```tsx [app/providers.tsx]
"use client"

import { QueryClient, QueryClientProvider } from "@tanstack/react-query"
import { createSteakhouseClient } from "@whisk/steakhouse"
import { SteakhouseProvider } from "@whisk/steakhouse/react"

const queryClient = new QueryClient()

const steakhouseClient = createSteakhouseClient({
  apiKey: process.env.NEXT_PUBLIC_WHISK_API_KEY!,
})

export function Providers({ children }: { children: React.ReactNode }) {
  return (
    <QueryClientProvider client={queryClient}> // [!code highlight]
      <SteakhouseProvider client={steakhouseClient}> // [!code highlight]
        {children}
      </SteakhouseProvider>
    </QueryClientProvider>
  )
}
```

```tsx [app/layout.tsx]
import { Providers } from "./providers"

export default function RootLayout({ children }: { children: React.ReactNode }) {
  return (
    <html>
      <body>
        <Providers>{children}</Providers> // [!code highlight]
      </body>
    </html>
  )
}
```

---

## useVaults

```tsx
import { useVaults } from "@whisk/steakhouse/react"

function VaultList() {
  const { data: vaults, isLoading } = useVaults({ chainId: 1 }) // [!code highlight]

  if (isLoading) return <div>Loading...</div>

  return vaults?.map((vault) => (
    <div key={vault.vaultAddress}>
      {vault.name} â€” {(vault.apy.total * 100).toFixed(2)}%
    </div>
  ))
}
```

| Parameter | Type | Description |
|-----------|------|-------------|
| `chainId` | `number` | Filter by chain (optional) |

---

## useDetailedVault

```tsx
import { useDetailedVault } from "@whisk/steakhouse/react"

function VaultDetail({ address }: { address: string }) {
  const { data: vault, isLoading } = useDetailedVault({ // [!code highlight]
    chainId: 1, // [!code highlight]
    address, // [!code highlight]
  }) // [!code highlight]

  if (isLoading) return <div>Loading...</div>
  if (!vault) return <div>Not found</div>

  return (
    <div>
      <h1>{vault.name}</h1>
      <p>${vault.totalAssets.usd.toLocaleString()} TVL</p>
      {vault.historical && <Chart data={vault.historical.daily} />}
    </div>
  )
}
```

| Parameter | Type | Description |
|-----------|------|-------------|
| `chainId` | `number` | Chain ID |
| `address` | `string` | Vault address |
| `historical` | `boolean` | Include time-series (default: `true`) |

---

## Server Components

Use query functions directly in Next.js server components:

```tsx [app/vaults/page.tsx]
import { createSteakhouseClient, getVaults } from "@whisk/steakhouse"

const client = createSteakhouseClient({
  apiKey: process.env.WHISK_API_KEY!,
})

export default async function VaultsPage() {
  const vaults = await getVaults(client, { chainId: 1 }) // [!code highlight]

  return vaults.map((v) => <div key={v.vaultAddress}>{v.name}</div>)
}
```
