# React Hooks

Hooks for client-side data fetching in React apps with automatic caching, background refetching, and loading states. Powered by [TanStack Query](https://tanstack.com/query).

For server-side rendering or non-React contexts, use [query functions](/queries) directly.

## Installation

:::code-group

```bash [pnpm]
pnpm add @whisk/steakhouse @tanstack/react-query
```

```bash [npm]
npm install @whisk/steakhouse @tanstack/react-query
```

```bash [yarn]
yarn add @whisk/steakhouse @tanstack/react-query
```

:::

## Setup

Wrap your app in both `QueryClientProvider` (TanStack Query) and `SteakhouseProvider`.

```tsx twoslash [app/providers.tsx]
import * as React from "react"
import { QueryClient, QueryClientProvider } from "@tanstack/react-query"
import { SteakhouseClient } from "@whisk/steakhouse"
import { SteakhouseProvider } from "@whisk/steakhouse/react"

const queryClient = new QueryClient()

const steakhouseClient = new SteakhouseClient({
  apiKey: process.env.NEXT_PUBLIC_STEAKHOUSE_API_KEY!,
})

export function Providers({ children }: { children: React.ReactNode }) {
  return (
    <QueryClientProvider client={queryClient}>
      <SteakhouseProvider client={steakhouseClient}>
        {children}
      </SteakhouseProvider>
    </QueryClientProvider>
  )
}
```

```tsx twoslash [app/layout.tsx]
// @noErrors
import * as React from "react"
import { Providers } from "./providers"

export default function RootLayout({ children }: { children: React.ReactNode }) {
  return (
    <html>
      <body>
        <Providers>{children}</Providers>
      </body>
    </html>
  )
}
```

## useTvl

Fetch Steakhouse TVL breakdown.

```tsx twoslash
import * as React from "react"
import { useTvl } from "@whisk/steakhouse/react"

function TvlDashboard() {
  const { data: tvl, isLoading } = useTvl() // [!code focus]

  if (isLoading) return <div>Loading...</div>

  return (
    <div>
      <h1>Total TVL: ${tvl?.totalUsd.toLocaleString()}</h1>

      <h2>By Chain</h2>
      {tvl?.byChain.map((item) => (
        <div key={item.chain.id}>
          {item.chain.name}: ${item.tvlUsd.toLocaleString()}
        </div>
      ))}

      <h2>By Protocol</h2>
      {tvl?.byProtocol.map((item) => (
        <div key={item.protocol}>
          {item.protocol}: ${item.tvlUsd.toLocaleString()}
        </div>
      ))}

      <h2>By Asset Category</h2>
      {tvl?.byAssetCategory.map((item) => (
        <div key={item.category}>
          {item.category}: ${item.tvlUsd.toLocaleString()}
        </div>
      ))}
    </div>
  )
}
```
